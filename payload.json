
{
  "message": {
    "text": "/evaluate q2 language=cpp\n#include <iostream>\n#include <string>\n#include <vector>\n#include <sstream>\n#include <limits>\n\nstruct TreeNode {\n    int val;\n    TreeNode *left;\n    TreeNode *right;\n    TreeNode(int x) : val(x), left(NULL), right(NULL) {}\n};\n\nclass Codec {\nprivate:\n    void serializeHelper(TreeNode* root, std::ostringstream& out) {\n        if (!root) {\n            return;\n        }\n        out << root->val << \",\";\n        serializeHelper(root->left, out);\n        serializeHelper(root->right, out);\n    }\n\n    TreeNode* deserializeHelper(std::vector<int>& vals, int& index, int lower, int upper) {\n        if (index >= vals.size() || vals[index] < lower || vals[index] > upper) {\n            return nullptr;\n        }\n        \n        TreeNode* node = new TreeNode(vals[index++]);\n        node->left = deserializeHelper(vals, index, lower, node->val);\n        node->right = deserializeHelper(vals, index, node->val, upper);\n        return node;\n    }\n\npublic:\n    std::string serialize(TreeNode* root) {\n        std::ostringstream out;\n        serializeHelper(root, out);\n        std::string result = out.str();\n        if (!result.empty()) {\n            result.pop_back();\n        }\n        return result;\n    }\n\n    TreeNode* deserialize(std::string data) {\n        if (data.empty()) {\n            return nullptr;\n        }\n        \n        std::vector<int> vals;\n        std::stringstream ss(data);\n        std::string segment;\n        \n        while(std::getline(ss, segment, ',')) { \n            vals.push_back(std::stoi(segment));\n        }\n        \n        int index = 0;\n        int lower = std::numeric_limits<int>::min();\n        int upper = std::numeric_limits<int>::max();\n        return deserializeHelper(vals, index, lower, upper);\n    }\n};\n\n#include <iostream>\n#include <string>\n\nint main() {\n    std::cout << \"Deserialization/Serialization logic loaded.\" << std::endl;\n    return 0;\n}",
    "chat": {
      "id": 1426981457
    }
  }
}